!function(d){d.gritter={},d.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},d.gritter.add=function(e){try{return _.add(e||{})}catch(t){var i="Gritter Error: "+t;"undefined"!=typeof console&&console.error?console.error(i,e):alert(i)}},d.gritter.remove=function(t,e){_.removeSpecific(t,e||{})},d.gritter.removeAll=function(t){_.stop(t||{})};var _={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1">Close Notification</a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(i){if("string"==typeof i&&(i={text:i}),null===i.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var t=i.title,e=i.text,n=i.image||"",r=i.sticky||!1,o=i.class_name||d.gritter.options.class_name,s=d.gritter.options.position,c=i.time||"";this._verifyWrapper(),this._item_count++;var a=this._item_count,l=this._tpl_item;d(["before_open","after_open","before_close","after_close"]).each(function(t,e){_["_"+e+"_"+a]=d.isFunction(i[e])?i[e]:function(){}}),this._custom_timer=0,c&&(this._custom_timer=c);var f=""!=n?'<img src="'+n+'" class="gritter-image" />':"",u=""!=n?"gritter-with-image":"gritter-without-image";if(t=t?this._str_replace("[[title]]",t,this._tpl_title):"",l=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[t,e,this._tpl_close,f,this._item_count,u,o],l),!1===this["_before_open_"+a]())return!1;d("#gritter-notice-wrapper").addClass(s).append(l);var m=d("#gritter-item-"+this._item_count);return m.fadeIn(this.fade_in_speed,function(){_["_after_open_"+a](d(this))}),r||this._setFadeTimer(m,a),d(m).bind("mouseenter mouseleave",function(t){"mouseenter"==t.type?r||_._restoreItemIfFading(d(this),a):r||_._setFadeTimer(d(this),a),_._hoverState(d(this),t.type)}),d(m).find(".gritter-close").click(function(){return _.removeSpecific(a,{},null,!0),!1}),a},_countRemoveWrapper:function(t,e,i){e.remove(),this["_after_close_"+t](e,i),0==d(".gritter-item-wrapper").length&&d("#gritter-notice-wrapper").remove()},_fade:function(t,e,i,n){var r=void 0===(i=i||{}).fade||i.fade,o=i.speed||this.fade_out_speed,s=n;this["_before_close_"+e](t,s),n&&t.unbind("mouseenter mouseleave"),r?t.animate({opacity:0},o,function(){t.animate({height:0},300,function(){_._countRemoveWrapper(e,t,s)})}):this._countRemoveWrapper(e,t)},_hoverState:function(t,e){"mouseenter"==e?(t.addClass("hover"),t.find(".gritter-close").show()):(t.removeClass("hover"),t.find(".gritter-close").hide())},removeSpecific:function(t,e,i,n){if(!i)i=d("#gritter-item-"+t);this._fade(i,t,e||{},n)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]),t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in d.gritter.options)this[opt]=d.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(t,e){var i=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+e]=setTimeout(function(){_._fade(t,e)},i)},stop:function(t){var e=d.isFunction(t.before_close)?t.before_close:function(){},i=d.isFunction(t.after_close)?t.after_close:function(){},n=d("#gritter-notice-wrapper");e(n),n.fadeOut(function(){d(this).remove(),i()})},_str_replace:function(t,e,i,n){var r,o=0,s=0,c="",a="",l=0,f=[].concat(t),u=[].concat(e),m=i,d=u instanceof Array,_=m instanceof Array;for(m=[].concat(m),n&&(this.window[n]=0),o=0,r=m.length;o<r;o++)if(""!==m[o])for(s=0,l=f.length;s<l;s++)c=m[o]+"",a=d?void 0!==u[s]?u[s]:"":u[0],m[o]=c.split(f[s]).join(a),n&&m[o]!==c&&(this.window[n]+=(c.length-m[o].length)/f[s].length);return _?m:m[0]},_verifyWrapper:function(){0==d("#gritter-notice-wrapper").length&&d("body").append(this._tpl_wrap)}}}(jQuery),function(){function t(){$(".show-area").click(function(){var t;t=$(this).data("show-area"),$(t).toggle()}),$(".show-below").click(function(){!function(t){$(t).children("i").toggleClass("icon-caret-right"),$(t).children("i").toggleClass("icon-caret-down");var e=$(t).data("show-below");$(e).toggle()}(this)}),$(".confirm").click(function(t){!function(t,e){e.preventDefault();var i=$.gritter.add({title:"Are you sure?",text:'<a href="'+t.href+'">'+t.title+'</a> | <a href="javascript:void(0)" id="confirm_cancel">Cancel</a>',sticky:!0});$("#confirm_cancel").click(function(){$.gritter.remove(i,{fade:!0,speed:"fast"})})}(this,t)}),$(".alert_msg").click(function(t){var e;e=this,t.preventDefault(),$.gritter.add({title:"Alert",text:e.title,sticky:!1,time:4e3})}),$("#size-1").click(function(){e(15)}),$("#size-2").click(function(){e(17)}),$("#size-3").click(function(){e(19)}),$("#size-4").click(function(){e(21)}),$(".highlight-input-text").click(function(){var t;(t=this).focus(),t.select(),copyToClipboard(),showNotification("Copied","Copied to clipboard!")}),$("spoiler").click(function(t){$(t.target).toggleClass("reveal")}),$(".show-error").click(function(t){t.preventDefault();var e=$(this).data("error-msg");showError(e)}),$(".std-ajax-form").on("submit",function(t){!function(t,e){e.preventDefault();var n=$(t);n.find(".success_msg").remove(),n.find(".error_msg").remove(),n.find("button").addClass("icon-spin"),n.find("button").prop("disabled",!0),$.post(n.attr("action"),n.serialize(),function(t,e){if("ok"===t&&"success"===e)$('<span class="text--bold success_msg"> Success!</span>').insertAfter(n.children("button")),window.location.href=location.href;else{var i=t;void 0!==t.error&&(i=t.error),$('<span class="text--negative error_msg"> '+i+"</span>").insertAfter(n.children("button"))}n.find("button").removeClass("icon-spin"),n.find("button").prop("disabled",!1)})}(this,t)}),$("form:not(.ajax-form)").on("submit",function(t){var e,i;e=t,!0===(i=$(this)).data("submitted")?e.preventDefault():(i.data("submitted",!0),setTimeout(function(){i.data("submitted",!1)},3e3))})}function e(t){var e=$("#bodyText");t+="px",e.css("font-size",t),e.find("span").css("font-size",t)}var i;window.AF=(i={init:function(){t()}},{init:function(){i.init()}}),AF.init()}(),function(){var e,t;window.AF.comments=(e=function(t){var e=$(t);return{confirmDel:function(){e.parent().html('Sure? <span class="del-affirmitive link"><a href="'+e[0].href+'">Yes</a></span>/<span class="del-negative link" title="'+e[0].href+'">No</span>')},del:function(){e.parents(".comments__comment").slideUp(300,function(){e.remove()})},dontDel:function(){e.parents(".comments__comment__delete").html('<a href="'+e[0].title+'" class="del-confirm link--block"><i class="icon-remove"></i></a>')}}},t=function(r){var o=r.parents(".comments__comment__meta").siblings(".comments-comment-message");return{edit:function(){if(0!==o.find("textarea").length)return!1;var t=o.text();o.wrapInner('<form><textarea name="comment_edit" class="comments__comment__msg-edit"/><input type="hidden" name="csrf_aff_token" value="'+csrfToken+'"/></form>'),o.find("textarea.comments__comment__msg-edit").text(t),r.text("Save")},save:function(){var t=r.data("form-action"),n=o.find("form");r.addClass("icon-spin"),$.post(t,n.serialize(),function(t,e){var i={};"string"==typeof t?"Please log in"===t?i.error="Please log in":i=JSON.parse(t):i=t,o.find(".error_msg").remove(),void 0!==i.comment&&"success"===e?(o.html(i.comment),r.text("Edit")):void 0!==i.error&&$('<span class="text--negative error_msg"> '+i.error+"</span>").insertAfter(n),r.removeClass("icon-spin")})}}},{init:function(){$(".comments__comment__delete").on("click",".del-confirm",function(t){t.preventDefault(),e(this).confirmDel()}),$(".comments__comment__delete").on("click",".del-affirmitive",function(){e(this).del()}),$(".comments__comment__delete").on("click",".del-negative",function(){e(this).dontDel()}),$(".comments__comment__edit").on("click",function(){"Edit"===$(this).text()?t($(this)).edit():"Save"===$(this).text()&&t($(this)).save()})}}),AF.comments.init()}(),function(){var t,f,u,m;(t=$("time"),f=function(t){var e=t.split(/[- :]/);if(e[3]&&e[4]&&e[5])return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]);var i=new Date;return new Date(e[0],e[1]-1,e[2],i.getHours(),i.getMinutes(),i.getSeconds())},u=function(t){return 0<=String(t).indexOf(":")},m=function(t,e){var i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],n=t.getDate(),r=t.getFullYear(),o=t.getHours(),s=t.getMinutes();s=s<10?"0"+s:s;var c=t.getSeconds();return c=c<10?"0"+c:c,e?i+" "+n+", "+r+" "+o+":"+s+":"+c:i+" "+n+", "+r},{init:function(){!function(){if(void 0!==t&&t){var l=null;t.each(function(){l=$(this).attr("datetime");var t=u(l),e=f(l),i=e.getMonth()+1,n=e.getDate(),r=e.getFullYear(),o=e.getHours(),s=e.getMinutes(),c=e.getSeconds(),a=new Date(i+"/"+n+"/"+r+" "+o+":"+s+":"+c+" UTC");$(this).html(m(a,t))})}}()}}).init()}();var copyToClipboard=function(){document.execCommand("copy")},showNotification=function(t,e){$.gritter.add({title:t,text:e,sticky:!1})},showError=function(t){t?t.error&&(t=t.error):t="Your last action did not complete successfully. Sorry about that.",$.gritter.add({title:'<span style="color:#FF9933">Oops! Something went wrong</span>',text:t,sticky:!0})},htmlentities=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},confirmOnPageExit=function(t){var e="Your changes haven't been saved yet";return(t=t||window.event)&&(t.returnValue=e),e};